<!doctype html>
<html>
  <head>
    <title>fore json instance</title>
    <script src="../../../app/bower_components/platform/platform.js"></script>
    <script src="../tools/htmltest.js"></script>
    <script src="../../../node_modules/chai/chai.js"></script>
    <link rel="import" href="../../../app/elements/fore-form.html">
    <style>
    </style>
  </head>
  <body>  
    <form is="fore-form" id="jsonForm" name="second">
      <div name="contact">
	<input id="contacttype" name="contacttype" type="text" value="Phone"/>
	<input id="phone" name="phone" type="text" value="001-12345678"/>
      </div>
    </form>
      
    <script>
      var assert = chai.assert;
      var async = requestAnimationFrame;
      
      window.addEventListener('fore-ready', function() {
	console.log('fore-json-instance: fore-ready');
	var form = document.querySelector('#jsonForm');
	assert.isDefined(form, 'form is defined');
	assert.isDefined(form.xfmodel, 'xfmodel is defined');
	assert.isDefined(form.xfmodel.getDefaultInstance(), 'defaultInstance is defined');
	var defInstID = form.xfmodel.getDefaultInstance();
	assert.equal(defInstID, 'defaultInstance')
	assert.isDefined(form.xfmodel.getInstance(defInstID), 'defaultInstance is present');
	assert.equal(form.xfmodel.getInstance(defInstID).data.second.contact.contacttype, 'Phone');
    done();
	console.log("All done ... fore-json-instance");
      });
    </script>
  </body>
</html>